{
  "metadata": {
    "timestamp": "2025-11-08T23-59-07",
    "version": "PR #8 Evaluation Harness",
    "total_users": 100,
    "total_personas": 100,
    "total_traces": 101
  },
  "metrics": {
    "coverage": {
      "value": 100.0,
      "target": 100.0,
      "passes": true,
      "tracking_only": false,
      "users_with_persona": 100,
      "users_with_meaningful_persona": 100,
      "users_with_both_legacy": 57
    },
    "explainability": {
      "value": 100.0,
      "target": 100.0,
      "passes": true,
      "total_recommendations": 496
    },
    "relevance": {
      "value": 100.0,
      "target": 90.0,
      "passes": true,
      "total_recommendations": 154
    },
    "latency": {
      "value": 0.010937934313143629,
      "target": 5.0,
      "passes": true,
      "mean_seconds": 0.0109,
      "p95_seconds": 0.0121
    },
    "auditability": {
      "value": 100.0,
      "target": 100.0,
      "passes": true,
      "completeness_percentage": 100.0
    },
    "fairness": {
      "value": true,
      "target": true,
      "passes": true,
      "overall_persona_rate": 1.0,
      "failing_demographics": [],
      "production_fairness_passes": false,
      "persona_distribution_parity": false,
      "recommendation_quantity_parity": false,
      "partner_offer_parity": true,
      "total_violations": 5
    }
  },
  "detailed_results": {
    "coverage": {
      "total_users": 100,
      "users_with_persona": 100,
      "users_with_meaningful_persona": 100,
      "users_with_3_behaviors": 57,
      "users_with_both_legacy": 57,
      "coverage_percentage": 100.0,
      "target": 100.0,
      "passes": true,
      "tracking_only": false,
      "note": "Coverage now counts all users with assigned persona (including 'general')"
    },
    "explainability": {
      "total_recommendations": 496,
      "recommendations_with_rationale": 496,
      "recommendations_without_rationale": 0,
      "explainability_percentage": 100.0,
      "target": 100.0,
      "passes": true,
      "missing_rationales_sample": []
    },
    "relevance": {
      "total_recommendations": 154,
      "relevant_recommendations": 154,
      "irrelevant_recommendations": 0,
      "relevance_percentage": 100.0,
      "target": 90.0,
      "passes": true,
      "irrelevant_sample": []
    },
    "latency": {
      "users_tested": 99,
      "mean_seconds": 0.0109,
      "median_seconds": 0.0107,
      "p95_seconds": 0.0121,
      "p99_seconds": 0.0172,
      "min_seconds": 0.0094,
      "max_seconds": 0.0182,
      "target": 5.0,
      "passes": true
    },
    "auditability": {
      "total_users": 100,
      "users_with_trace_file": 100,
      "users_with_complete_trace": 100,
      "auditability_percentage": 100.0,
      "completeness_percentage": 100.0,
      "target": 100.0,
      "passes": true,
      "incomplete_traces_sample": []
    },
    "fairness": {
      "overall_persona_rate": 1.0,
      "tolerance": 0.1,
      "demographics": {
        "gender": {
          "passes": true,
          "max_deviation": 0.0,
          "group_rates": {
            "female": 1.0,
            "male": 1.0,
            "non_binary": 1.0,
            "prefer_not_to_say": 1.0
          },
          "group_counts": {
            "prefer_not_to_say": 25,
            "female": 25,
            "male": 25,
            "non_binary": 25
          },
          "deviations": {
            "female": 0.0,
            "male": 0.0,
            "non_binary": 0.0,
            "prefer_not_to_say": 0.0
          }
        },
        "income_tier": {
          "passes": true,
          "max_deviation": 0.0,
          "group_rates": {
            "high": 1.0,
            "low": 1.0,
            "medium": 1.0
          },
          "group_counts": {
            "low": 34,
            "high": 33,
            "medium": 33
          },
          "deviations": {
            "high": 0.0,
            "low": 0.0,
            "medium": 0.0
          }
        },
        "region": {
          "passes": true,
          "max_deviation": 0.0,
          "group_rates": {
            "midwest": 1.0,
            "northeast": 1.0,
            "south": 1.0,
            "west": 1.0
          },
          "group_counts": {
            "midwest": 25,
            "west": 25,
            "south": 25,
            "northeast": 25
          },
          "deviations": {
            "midwest": 0.0,
            "northeast": 0.0,
            "south": 0.0,
            "west": 0.0
          }
        },
        "age": {
          "passes": true,
          "max_deviation": 0.0,
          "group_rates": {
            "18-30": 1.0,
            "31-50": 1.0,
            "51+": 1.0
          },
          "group_counts": {
            "18-30": 34,
            "51+": 33,
            "31-50": 33
          },
          "deviations": {
            "18-30": 0.0,
            "31-50": 0.0,
            "51+": 0.0
          },
          "buckets": [
            "18-30",
            "31-50",
            "51-100"
          ]
        }
      },
      "all_demographics_pass": true,
      "failing_demographics": [],
      "persona_distribution_parity": {
        "tolerance": 0.1,
        "personas_checked": [
          "Cash Flow Optimizer",
          "High Utilization",
          "General",
          "Savings Builder",
          "Subscription-Heavy"
        ],
        "violations": [
          {
            "persona": "Cash Flow Optimizer",
            "demographic": "gender",
            "group": "male",
            "deviation": 0.15,
            "tolerance": 0.1
          },
          {
            "persona": "Cash Flow Optimizer",
            "demographic": "region",
            "group": "northeast",
            "deviation": 0.11,
            "tolerance": 0.1
          },
          {
            "persona": "High Utilization",
            "demographic": "gender",
            "group": "female",
            "deviation": 0.21,
            "tolerance": 0.1
          }
        ],
        "persona_metrics": {
          "Cash Flow Optimizer": {
            "overall_rate": 0.57,
            "demographics": {
              "gender": {
                "passes": false,
                "max_deviation": 0.15,
                "group_rates": {
                  "female": 0.44,
                  "male": 0.72,
                  "non_binary": 0.56,
                  "prefer_not_to_say": 0.56
                },
                "deviations": {
                  "female": 0.13,
                  "male": 0.15,
                  "non_binary": 0.01,
                  "prefer_not_to_say": 0.01
                }
              },
              "income_tier": {
                "passes": true,
                "max_deviation": 0.0967,
                "group_rates": {
                  "high": 0.6667,
                  "low": 0.5,
                  "medium": 0.5455
                },
                "deviations": {
                  "high": 0.0967,
                  "low": 0.07,
                  "medium": 0.0245
                }
              },
              "region": {
                "passes": false,
                "max_deviation": 0.11,
                "group_rates": {
                  "midwest": 0.56,
                  "northeast": 0.68,
                  "south": 0.48,
                  "west": 0.56
                },
                "deviations": {
                  "midwest": 0.01,
                  "northeast": 0.11,
                  "south": 0.09,
                  "west": 0.01
                }
              },
              "age_bucket": {
                "passes": true,
                "max_deviation": 0.0852,
                "group_rates": {
                  "18-30": 0.6176,
                  "31-50": 0.4848,
                  "51+": 0.6061
                },
                "deviations": {
                  "18-30": 0.0476,
                  "31-50": 0.0852,
                  "51+": 0.0361
                }
              }
            },
            "max_deviation": 0.15000000000000002,
            "passes": false
          },
          "High Utilization": {
            "overall_rate": 0.27,
            "demographics": {
              "gender": {
                "passes": false,
                "max_deviation": 0.21,
                "group_rates": {
                  "female": 0.48,
                  "male": 0.12,
                  "non_binary": 0.2,
                  "prefer_not_to_say": 0.28
                },
                "deviations": {
                  "female": 0.21,
                  "male": 0.15,
                  "non_binary": 0.07,
                  "prefer_not_to_say": 0.01
                }
              },
              "income_tier": {
                "passes": true,
                "max_deviation": 0.0579,
                "group_rates": {
                  "high": 0.2121,
                  "low": 0.3235,
                  "medium": 0.2727
                },
                "deviations": {
                  "high": 0.0579,
                  "low": 0.0535,
                  "medium": 0.0027
                }
              },
              "region": {
                "passes": true,
                "max_deviation": 0.09,
                "group_rates": {
                  "midwest": 0.36,
                  "northeast": 0.2,
                  "south": 0.28,
                  "west": 0.24
                },
                "deviations": {
                  "midwest": 0.09,
                  "northeast": 0.07,
                  "south": 0.01,
                  "west": 0.03
                }
              },
              "age_bucket": {
                "passes": true,
                "max_deviation": 0.0641,
                "group_rates": {
                  "18-30": 0.2059,
                  "31-50": 0.303,
                  "51+": 0.303
                },
                "deviations": {
                  "18-30": 0.0641,
                  "31-50": 0.033,
                  "51+": 0.033
                }
              }
            },
            "max_deviation": 0.20999999999999996,
            "passes": false
          },
          "General": {
            "overall_rate": 0.08,
            "demographics": {
              "gender": {
                "passes": true,
                "max_deviation": 0.08,
                "group_rates": {
                  "female": 0.0,
                  "male": 0.04,
                  "non_binary": 0.16,
                  "prefer_not_to_say": 0.12
                },
                "deviations": {
                  "female": 0.08,
                  "male": 0.04,
                  "non_binary": 0.08,
                  "prefer_not_to_say": 0.04
                }
              },
              "income_tier": {
                "passes": true,
                "max_deviation": 0.0194,
                "group_rates": {
                  "high": 0.0606,
                  "low": 0.0882,
                  "medium": 0.0909
                },
                "deviations": {
                  "high": 0.0194,
                  "low": 0.0082,
                  "medium": 0.0109
                }
              },
              "region": {
                "passes": true,
                "max_deviation": 0.08,
                "group_rates": {
                  "midwest": 0.04,
                  "northeast": 0.04,
                  "south": 0.08,
                  "west": 0.16
                },
                "deviations": {
                  "midwest": 0.04,
                  "northeast": 0.04,
                  "south": 0.0,
                  "west": 0.08
                }
              },
              "age_bucket": {
                "passes": true,
                "max_deviation": 0.08,
                "group_rates": {
                  "18-30": 0.1176,
                  "31-50": 0.1212,
                  "51+": 0.0
                },
                "deviations": {
                  "18-30": 0.0376,
                  "31-50": 0.0412,
                  "51+": 0.08
                }
              }
            },
            "max_deviation": 0.08,
            "passes": true
          },
          "Savings Builder": {
            "overall_rate": 0.02,
            "demographics": {
              "gender": {
                "passes": true,
                "max_deviation": 0.02,
                "group_rates": {
                  "female": 0.04,
                  "male": 0.0,
                  "non_binary": 0.04,
                  "prefer_not_to_say": 0.0
                },
                "deviations": {
                  "female": 0.02,
                  "male": 0.02,
                  "non_binary": 0.02,
                  "prefer_not_to_say": 0.02
                }
              },
              "income_tier": {
                "passes": true,
                "max_deviation": 0.02,
                "group_rates": {
                  "high": 0.0,
                  "low": 0.0294,
                  "medium": 0.0303
                },
                "deviations": {
                  "high": 0.02,
                  "low": 0.0094,
                  "medium": 0.0103
                }
              },
              "region": {
                "passes": true,
                "max_deviation": 0.02,
                "group_rates": {
                  "midwest": 0.0,
                  "northeast": 0.0,
                  "south": 0.04,
                  "west": 0.04
                },
                "deviations": {
                  "midwest": 0.02,
                  "northeast": 0.02,
                  "south": 0.02,
                  "west": 0.02
                }
              },
              "age_bucket": {
                "passes": true,
                "max_deviation": 0.0406,
                "group_rates": {
                  "18-30": 0.0,
                  "31-50": 0.0,
                  "51+": 0.0606
                },
                "deviations": {
                  "18-30": 0.02,
                  "31-50": 0.02,
                  "51+": 0.0406
                }
              }
            },
            "max_deviation": 0.040606060606060604,
            "passes": true
          },
          "Subscription-Heavy": {
            "overall_rate": 0.06,
            "demographics": {
              "gender": {
                "passes": true,
                "max_deviation": 0.06,
                "group_rates": {
                  "female": 0.04,
                  "male": 0.12,
                  "non_binary": 0.04,
                  "prefer_not_to_say": 0.04
                },
                "deviations": {
                  "female": 0.02,
                  "male": 0.06,
                  "non_binary": 0.02,
                  "prefer_not_to_say": 0.02
                }
              },
              "income_tier": {
                "passes": true,
                "max_deviation": 0.0012,
                "group_rates": {
                  "high": 0.0606,
                  "low": 0.0588,
                  "medium": 0.0606
                },
                "deviations": {
                  "high": 0.0006,
                  "low": 0.0012,
                  "medium": 0.0006
                }
              },
              "region": {
                "passes": true,
                "max_deviation": 0.06,
                "group_rates": {
                  "midwest": 0.04,
                  "northeast": 0.08,
                  "south": 0.12,
                  "west": 0.0
                },
                "deviations": {
                  "midwest": 0.02,
                  "northeast": 0.02,
                  "south": 0.06,
                  "west": 0.06
                }
              },
              "age_bucket": {
                "passes": true,
                "max_deviation": 0.0309,
                "group_rates": {
                  "18-30": 0.0588,
                  "31-50": 0.0909,
                  "51+": 0.0303
                },
                "deviations": {
                  "18-30": 0.0012,
                  "31-50": 0.0309,
                  "51+": 0.0297
                }
              }
            },
            "max_deviation": 0.06,
            "passes": true
          }
        },
        "all_personas_pass": false
      },
      "recommendation_quantity_parity": {
        "overall_mean": 4.96,
        "tolerance": 0.1,
        "demographics": {
          "gender": {
            "passes": false,
            "max_deviation_pct": 0.1048,
            "group_means": {
              "female": 5.48,
              "male": 4.72,
              "non_binary": 4.68,
              "prefer_not_to_say": 4.96
            },
            "deviations_pct": {
              "female": 0.1048,
              "male": 0.0484,
              "non_binary": 0.0565,
              "prefer_not_to_say": 0.0
            }
          },
          "income_tier": {
            "passes": true,
            "max_deviation_pct": 0.0508,
            "group_means": {
              "high": 5.21,
              "low": 4.76,
              "medium": 4.91
            },
            "deviations_pct": {
              "high": 0.0508,
              "low": 0.0394,
              "medium": 0.0103
            }
          },
          "region": {
            "passes": true,
            "max_deviation_pct": 0.0645,
            "group_means": {
              "midwest": 5.0,
              "northeast": 5.28,
              "south": 4.64,
              "west": 4.92
            },
            "deviations_pct": {
              "midwest": 0.0081,
              "northeast": 0.0645,
              "south": 0.0645,
              "west": 0.0081
            }
          },
          "age_bucket": {
            "passes": false,
            "max_deviation_pct": 0.1364,
            "group_means": {
              "18-30": 4.82,
              "31-50": 4.42,
              "51+": 5.64
            },
            "deviations_pct": {
              "18-30": 0.0275,
              "31-50": 0.108,
              "51+": 0.1364
            }
          }
        },
        "violations": [
          {
            "demographic": "gender",
            "group": "female",
            "deviation_pct": 0.1048,
            "group_mean": 5.48,
            "overall_mean": 4.96
          },
          {
            "demographic": "age_bucket",
            "group": "51+",
            "deviation_pct": 0.1364,
            "group_mean": 5.64,
            "overall_mean": 4.96
          }
        ],
        "passes": false
      },
      "partner_offer_parity": {
        "overall_offer_rate": 0.8,
        "tolerance": 0.1,
        "demographics": {
          "gender": {
            "passes": true,
            "max_deviation": 0.08,
            "group_rates": {
              "female": 0.88,
              "male": 0.8,
              "non_binary": 0.72,
              "prefer_not_to_say": 0.8
            },
            "deviations": {
              "female": 0.08,
              "male": 0.0,
              "non_binary": 0.08,
              "prefer_not_to_say": 0.0
            }
          },
          "income_tier": {
            "passes": true,
            "max_deviation": 0.0941,
            "group_rates": {
              "high": 0.8788,
              "low": 0.7059,
              "medium": 0.8182
            },
            "deviations": {
              "high": 0.0788,
              "low": 0.0941,
              "medium": 0.0182
            }
          },
          "region": {
            "passes": true,
            "max_deviation": 0.08,
            "group_rates": {
              "midwest": 0.8,
              "northeast": 0.88,
              "south": 0.72,
              "west": 0.8
            },
            "deviations": {
              "midwest": 0.0,
              "northeast": 0.08,
              "south": 0.08,
              "west": 0.0
            }
          },
          "age_bucket": {
            "passes": true,
            "max_deviation": 0.0727,
            "group_rates": {
              "18-30": 0.8235,
              "31-50": 0.7273,
              "51+": 0.8485
            },
            "deviations": {
              "18-30": 0.0235,
              "31-50": 0.0727,
              "51+": 0.0485
            }
          }
        },
        "violations": [],
        "passes": true
      },
      "production_fairness_passes": false,
      "production_violations": [
        {
          "persona": "Cash Flow Optimizer",
          "demographic": "gender",
          "group": "male",
          "deviation": 0.15,
          "tolerance": 0.1
        },
        {
          "persona": "Cash Flow Optimizer",
          "demographic": "region",
          "group": "northeast",
          "deviation": 0.11,
          "tolerance": 0.1
        },
        {
          "persona": "High Utilization",
          "demographic": "gender",
          "group": "female",
          "deviation": 0.21,
          "tolerance": 0.1
        },
        {
          "demographic": "gender",
          "group": "female",
          "deviation_pct": 0.1048,
          "group_mean": 5.48,
          "overall_mean": 4.96
        },
        {
          "demographic": "age_bucket",
          "group": "51+",
          "deviation_pct": 0.1364,
          "group_mean": 5.64,
          "overall_mean": 4.96
        }
      ]
    }
  },
  "summary": {
    "all_metrics_pass": false,
    "metrics_passing": 5,
    "metrics_total": 6,
    "tracking_metrics": [],
    "fairness_legacy_passes": true,
    "fairness_production_passes": false
  }
}